/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/8.5.47
 * Generated at: 2020-01-07 23:10:33 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.WEB_002dINF.views.item;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import item.model.vo.ItemQnaAns;
import java.util.Map;
import item.model.vo.ItemQna;
import item.model.vo.ItemImage;
import java.util.List;
import item.model.vo.Item;
import java.text.DecimalFormat;
import board.model.vo.*;
import member.model.vo.*;

public final class itemView_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.HashMap<java.lang.String,java.lang.Long>(2);
    _jspx_dependants.put("/WEB-INF/views/common/header.jsp", Long.valueOf(1578438112015L));
    _jspx_dependants.put("/WEB-INF/views/common/footer.jsp", Long.valueOf(1578438112430L));
  }

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.HashSet<>();
    _jspx_imports_packages.add("javax.servlet");
    _jspx_imports_packages.add("javax.servlet.http");
    _jspx_imports_packages.add("board.model.vo");
    _jspx_imports_packages.add("javax.servlet.jsp");
    _jspx_imports_packages.add("member.model.vo");
    _jspx_imports_classes = new java.util.HashSet<>();
    _jspx_imports_classes.add("item.model.vo.ItemImage");
    _jspx_imports_classes.add("java.util.List");
    _jspx_imports_classes.add("item.model.vo.Item");
    _jspx_imports_classes.add("item.model.vo.ItemQnaAns");
    _jspx_imports_classes.add("java.util.Map");
    _jspx_imports_classes.add("java.text.DecimalFormat");
    _jspx_imports_classes.add("item.model.vo.ItemQna");
  }

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
      throws java.io.IOException, javax.servlet.ServletException {

    final java.lang.String _jspx_method = request.getMethod();
    if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method) && !javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET POST or HEAD");
      return;
    }

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("   \n");
      out.write("   \n");
      out.write("   ");
 
   		//로그인한 경우
   		Member memberLoggedIn= (Member)session.getAttribute("memberLoggedIn");

   
      out.write("\n");
      out.write("<!DOCTYPE html>\n");
      out.write("<html lang=\"ko\">\n");
      out.write("<head>\n");
      out.write("    <meta charset=\"utf-8\">\n");
      out.write("    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n");
      out.write("    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n");
      out.write("    <title>re:flex</title>\n");
      out.write("    <link href=\"https://fonts.googleapis.com/css?family=Noto+Sans+KR:100,300,400,500,700,900&display=swap\" rel=\"stylesheet\">\n");
      out.write("    <link href=\"https://fonts.googleapis.com/css?family=Libre+Barcode+128+Text|Monoton|Permanent+Marker|Righteous|Seymour+One|Stalinist+One&display=swap\" rel=\"stylesheet\">\n");
      out.write("    <link href=\"");
      out.print(request.getContextPath());
      out.write("/css/bootstrap.min.css\" rel=\"stylesheet\"> <!-- 부트스트랩 -->\n");
      out.write("    <link href=\"");
      out.print(request.getContextPath());
      out.write("/css/style.css\" rel=\"stylesheet\">\n");
      out.write("    <link href=\"");
      out.print(request.getContextPath());
      out.write("/css/mypage.css\" rel=\"stylesheet\">\n");
      out.write("    <script src=\"");
      out.print(request.getContextPath());
      out.write("/js/jquery-3.4.1.js\"></script>\n");
      out.write("    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js\"></script>\n");
      out.write("    <script src=\"");
      out.print(request.getContextPath());
      out.write("/js/bootstrap.min.js\"></script>\n");
      out.write("    <script src=\"");
      out.print(request.getContextPath());
      out.write("/js/header.js\"></script>\n");
      out.write("    \n");
      out.write("</head>\n");
      out.write("<body>\n");
      out.write("    <header class=\"container-fluid navbar-fixed-top\">\n");
      out.write("        <div id=\"header-wrapper\" class=\"row\">\n");
      out.write("            <div id=\"logo\" class=\"col-md-4\">\n");
      out.write("                <h1 class=\"eng\"><a href=\"");
      out.print(request.getContextPath());
      out.write("/index.jsp\">re:flex</a></h1>\n");
      out.write("            </div>\n");
      out.write("            <div id=\"search\" class=\"col-md-4\">\n");
      out.write("                <h2 class=\"sr-only\">상품 검색</h2>\n");
      out.write("                <form action=\"");
      out.print(request.getContextPath());
      out.write("/item/itemSearch\">\n");
      out.write("                    <button type=\"submit\" id=\"btn-search\" aria-label=\"search products\">\n");
      out.write("                        <span class=\"glyphicon glyphicon-search\" aria-hidden=\"true\"></span>\n");
      out.write("                    </button>\n");
      out.write("                    <input type=\"search\" name=\"search\" placeholder=\"검색\">\n");
      out.write("                </form>\n");
      out.write("            </div>\n");
      out.write("            <div id=\"menu\" class=\"col-md-4\">\n");
      out.write("                <ul class=\"list-unstyled list-inline text-right\">\n");
      out.write("                    ");
if(memberLoggedIn==null){ 
      out.write("\n");
      out.write("                    <li class=\"login-hide\"><a href=\"");
      out.print(request.getContextPath());
      out.write("/member/memberLogin\">로그인</a></li>\n");
      out.write("                    <li class=\"login-hide\"><a href=\"");
      out.print(request.getContextPath());
      out.write("/member/memberEnroll\">회원가입</a></li>\n");
      out.write("                    ");
}
                    else{
                    
      out.write("\n");
      out.write("\n");
      out.write("\t                <li><span class=\"strong\">");
      out.print(memberLoggedIn.getMemberName());
      out.write("</span>님</li>                    \n");
      out.write("\n");
      out.write("\t                <li>\n");
      out.write("\t                \t<a href=\"");
      out.print(request.getContextPath());
      out.write("/member/logout\">로그아웃</a>\n");
      out.write("\t                </li>\n");
      out.write("\t\t\t\t\t");
 	} 
      out.write("\n");
      out.write("\n");
      out.write("\t\t\t\t\t");
if(memberLoggedIn !=null && !"admin".equals(memberLoggedIn.getMemberId())) {
      out.write("\n");
      out.write("                    <li>\n");
      out.write("                        <h2 class=\"sr-only\">장바구니</h2>\n");
      out.write("                        <a href=\"");
      out.print(request.getContextPath());
      out.write("/member/memberCart?memberId=");
      out.print(memberLoggedIn.getMemberId());
      out.write("\" aria-label=\"cart\"><span class=\"glyphicon glyphicon-shopping-cart\" aria-hidden=\"true\"></span></a>\n");
      out.write("                    </li>\n");
      out.write("                    ");
} 
      out.write("\n");
      out.write("                    <li>\n");
      out.write("                        <button type=\"button\"  id=\"btn-sidemenu\">\n");
      out.write("                            <span class=\"glyphicon glyphicon-list\" aria-hidden=\"true\"></span>\n");
      out.write("                        </button>\n");
      out.write("                    </li>\n");
      out.write("                </ul>\n");
      out.write("                <!-- side menu -->\n");
      out.write("                <!-- level1 -->\n");
      out.write("                <div id=\"sidemenu-closeLayer\">\n");
      out.write("                <nav id=\"level1-sidemenu\" class=\"sidemenu-wrapper\">\n");
      out.write("                    <header></header>\n");
      out.write("                    <ul class=\"list-unstyled\">\n");
      out.write("                        <li id=\"recommended\" data-target=\"#level2-recommended\"><a href=\"#\">이럴 때 빌려봐<span class=\"glyphicon glyphicon-menu-right\" aria-hidden=\"true\"></span></a></li>\n");
      out.write("                        ");
 
                        	//관리자가 로그인한 경우
                        	if(memberLoggedIn != null && "admin".equals(memberLoggedIn.getMemberId())){ 
                        
      out.write("\n");
      out.write("                        \t<li id=\"adminPage\" data-target=\"#level2-adminPage\"><a href=\"#\">관리자페이지<span class=\"glyphicon glyphicon-menu-right\" aria-hidden=\"true\"></span></a></li>\n");
      out.write("\t\t\t\t\t\t");
 
							} 
                        	//로그인한 회원이 있는 경우 마이페이지 메뉴 
                        	else if(memberLoggedIn!=null && !("admin".equals(memberLoggedIn.getMemberId()))){
						
      out.write("\n");
      out.write("                        \t<li id=\"mypage\" data-target=\"#level2-mypage\"><a href=\"#\">마이페이지<span class=\"glyphicon glyphicon-menu-right\" aria-hidden=\"true\"></span></a></li>\n");
      out.write("                        ");

	                        }
                        	//로그인 안했으면 로그인, 회원가입 메뉴 보이게
							else{
                        
      out.write("\n");
      out.write("                        \t<li><a href=\"");
      out.print(request.getContextPath());
      out.write("/member/memberLogin\">로그인</a></li>\n");
      out.write("                        \t<li><a href=\"");
      out.print(request.getContextPath());
      out.write("/member/memberEnroll\">회원가입</a></li>\n");
      out.write("                        ");

							}
                        
      out.write("\n");
      out.write("                        <li><a href=\"#\">고객서비스(FAQ)</a></li>\n");
      out.write("                        <li><a href=\"#\">re:flex 소개</a></li>\n");
      out.write("                    </ul>\n");
      out.write("                </nav>\n");
      out.write("                <!-- level2: 이럴때빌려봐 -->\n");
      out.write("                <nav id=\"level2-recommended\" class=\"sidemenu-wrapper\">\n");
      out.write("                    <header class=\"text-center\">\n");
      out.write("                        <button type=\"button\" class=\"btn-goLevel1\">\n");
      out.write("                        \t<span class=\"glyphicon glyphicon-menu-left\" aria-hidden=\"true\"></span>\n");
      out.write("                              이럴 때 빌려봐\n");
      out.write("                        </button>\n");
      out.write("                    </header>\n");
      out.write("                    <ul class=\"list-unstyled\">\n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/item/itemList?categoryNo=CT01\">반려동물과 함께 할 때</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/item/itemList?categoryNo=CT02\">육아할 때</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/item/itemList?categoryNo=CT03\">파티할 때</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/item/itemList?categoryNo=CT04\">운동할 때</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/item/itemList?categoryNo=CT05\">여행갈 때</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/item/itemList?categoryNo=CT06\">캠핑갈 때</a></li>\n");
      out.write("                    </ul>\n");
      out.write("                </nav>\n");
      out.write("                <!-- level2: 마이페이지 -->\n");
      out.write("                ");

                	if(memberLoggedIn != null){
                
      out.write("\n");
      out.write("                <nav id=\"level2-mypage\" class=\"sidemenu-wrapper\">\n");
      out.write("                    <header class=\"text-center\">\n");
      out.write("                        <button type=\"button\" class=\"btn-goLevel1\">\n");
      out.write("                            <span class=\"glyphicon glyphicon-menu-left\" aria-hidden=\"true\"></span>\n");
      out.write("                            마이페이지\n");
      out.write("                        </button>\n");
      out.write("                    </header>\n");
      out.write("                    <ul class=\"list-unstyled\">\n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/mypage/mypageOrderList?memberId=");
      out.print(memberLoggedIn.getMemberId());
      out.write("\">주문조회</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/mypage/mypageWishlist?memberId=");
      out.print(memberLoggedIn.getMemberId());
      out.write("\">위시리스트</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/mypage/mypageRentalIng?memberId=");
      out.print(memberLoggedIn.getMemberId());
      out.write("\">계약중인 렌탈</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/mypage/mypageRentalFin?memberId=");
      out.print(memberLoggedIn.getMemberId());
      out.write("\">종료된 렌탈</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/mypage/mypagePoint?memberId=");
      out.print(memberLoggedIn.getMemberId());
      out.write("\">포인트 확인</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/mypage/mypageReview?memberId=");
      out.print(memberLoggedIn.getMemberId());
      out.write("\">이용후기 내역</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/mypage/mypageOneToOne?memberId=");
      out.print(memberLoggedIn.getMemberId());
      out.write("\">1:1문의 내역</a></li>\n");
      out.write("                   \t\t<li><a href=\"");
      out.print(request.getContextPath());
      out.write("/member/memberUpdate?memberId=");
      out.print(memberLoggedIn.getMemberId());
      out.write("\">회원정보 수정</a></li> \n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/member/memberDelete?memberId=");
      out.print(memberLoggedIn.getMemberId());
      out.write("\">회원정보 탈퇴</a></li>\n");
      out.write("                    </ul>\n");
      out.write("                </nav>\n");
      out.write("                ");

                	}
                
      out.write("\n");
      out.write("\n");
      out.write("                \n");
      out.write("\n");
      out.write("                <nav id=\"level2-adminPage\" class=\"sidemenu-wrapper\">\n");
      out.write("                    <header class=\"text-center\">\n");
      out.write("                        <button type=\"button\" class=\"btn-goLevel1\">\n");
      out.write("                            <span class=\"glyphicon glyphicon-menu-left\" aria-hidden=\"true\"></span>\n");
      out.write("                            관리자페이지\n");
      out.write("                        </button>\n");
      out.write("                    </header>\n");
      out.write("                    <ul class=\"list-unstyled\">\n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/admin/itemEnroll\">상품등록</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/admin/itemSearch\">상품조회</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/admin/rentalList\">렌탈내역</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/admin/orderOutline\">판매현황</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/admin/orderList\">배송관리</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/admin/member/memberQna\">1:1문의관리</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print(request.getContextPath());
      out.write("/admin/member/memberSearch\">회원조회</a></li>\n");
      out.write("\n");
      out.write("                    </ul>\n");
      out.write("                </nav>\n");
      out.write("                </div>\n");
      out.write("            </div>\n");
      out.write("        </div>\n");
      out.write("    </header>");
      out.write('\n');

	String memberId = memberLoggedIn != null?memberLoggedIn.getMemberId():"";
	String categoryNo = (String)request.getAttribute("categoryNo");
	Item item = (Item)request.getAttribute("item");
	List<ItemImage> imgList = (List<ItemImage>)request.getAttribute("imgList");
	
	List<Board> blist = (List<Board>)request.getAttribute("list"); //이용후기 리스트
	List<ItemQna> qList = (List<ItemQna>)request.getAttribute("qList"); //qna 리스트
	Map<Integer, ItemQnaAns> qnaMap = (Map<Integer, ItemQnaAns>)request.getAttribute("qnaMap"); //qna+답변
	
	String reviewPageBar = (String)request.getAttribute("reviewPageBar"); //이용후기 페이지바
	String qnaPageBar = (String)request.getAttribute("qnaPageBar"); //qna 페이지바
	
	int reviewTotalContent = (int)request.getAttribute("reviewTotalContent"); //이용후기 총 게시글 수
	int qnaTotalContent = (int)request.getAttribute("qnaTotalContent"); //qna 총 게시글 수
	
	//가격 콤마찍기
	int discountedPrice7 = (int)Math.ceil((item.getItemPrice()*0.98)/240*7)/100*100; //14일기준
	int discountedPrice14 = (int)Math.ceil((item.getItemPrice()*0.95)/240*14)/100*100; //14일기준
	int discountedPrice30 = (int)Math.ceil((item.getItemPrice()*0.90)/240*30)/100*100; //14일기준
	DecimalFormat dc = new DecimalFormat("###,###,###,###원");
	String price7 = dc.format(discountedPrice7);
	String price14 = dc.format(discountedPrice14);
	String price30 = dc.format(discountedPrice30);
	
	//상품설명
	String desc = item.getItemDesc();
	String[] descArray = desc.split(",");
	

      out.write("\n");
      out.write("<script src=\"");
      out.print(request.getContextPath());
      out.write("/js/itemView.js\"></script>\n");
      out.write("<script>\n");
      out.write("$(function(){\n");
      out.write("\t//Q&A등록하기 버튼\n");
      out.write("\t$('#btn-goQna').on('click', function(){\n");
      out.write("\t\tif(");
      out.print(memberLoggedIn==null);
      out.write("){\n");
      out.write("\t\t\tgoLogin();\n");
      out.write("\t\t}else{\n");
      out.write("\t\t\tlocation.href = \"");
      out.print(request.getContextPath());
      out.write("/item/itemQnaForm?categoryNo=");
      out.print(categoryNo);
      out.write("&itemNo=");
      out.print(item.getItemNo());
      out.write("\";\n");
      out.write("\t\t}\n");
      out.write("\t});\n");
      out.write("\t\n");
      out.write("\t//위시리스트 버튼 눌렀을 경우: 회원아이디, 상품번호, 렌탈유형 넘기기\n");
      out.write("\t$(\"#btn-wishlist\").on('click', function(){\n");
      out.write("\t\tif(");
      out.print(memberLoggedIn==null);
      out.write("){\n");
      out.write("\t\t\tgoLogin();\n");
      out.write("\t\t}\n");
      out.write("\t\telse{\n");
      out.write("\t\t\tif(!confirm(\"현재 상품을 위시리스트에 담으시겠습니까?\")) return;\n");
      out.write("\t\t\t\n");
      out.write("\t\t\tlet rentTypeVal = $(\"#rent-type option:selected\").val(); //렌탈유형\n");
      out.write("\t\t\tlet rentTypePriceVal = $(\"#rent-type option:selected\").text(); //가격\n");
      out.write("\t\t\tconsole.log(rentTypeVal);\n");
      out.write("\t\t\t$.ajax({\n");
      out.write("\t\t\t\turl: \"");
      out.print(request.getContextPath());
      out.write("/mypage/mypageWishlistInsert\",\n");
      out.write("\t\t\t\ttype: \"post\",\n");
      out.write("\t\t\t\tdata: {\n");
      out.write("\t\t\t\t\tmemberId: \"");
      out.print(memberId);
      out.write("\",\n");
      out.write("\t\t\t\t\titemNo: ");
      out.print(item.getItemNo());
      out.write(",\n");
      out.write("\t\t\t\t\trentType: rentTypeVal,\n");
      out.write("\t\t\t\t\trentTypePrice: rentTypePriceVal\n");
      out.write("\t\t\t\t},\n");
      out.write("\t\t\t\tdataType: \"json\",\n");
      out.write("\t\t\t\tsuccess: data => {\n");
      out.write("\t\t\t\t\tconsole.log(data);\n");
      out.write("\t\t\t\t\tlet result = data.result;\n");
      out.write("\t\t\t\t\t\n");
      out.write("\t\t\t\t\tif(result===1){\n");
      out.write("\t\t\t\t\t\tif(!confirm(\"위시리스트에 상품이 담겼습니다.\\n지금 위시리스트를 확인하시겠습니까?\")) return;\n");
      out.write("\t\t\t\t\t\tlocation.href = \"");
      out.print(request.getContextPath());
      out.write("/mypage/mypageWishlist?memberId=");
      out.print(memberId);
      out.write("\";\n");
      out.write("\t\t\t\t\t}\n");
      out.write("\t\t\t\t\telse if(result===-1){\n");
      out.write("\t\t\t\t\t\tif(!confirm(\"이미 위시리스트에 존재하는 상품입니다!\\n지금 위시리스트를 확인하시겠습니까?\")) return;\n");
      out.write("\t\t\t\t\t\tlocation.href = \"");
      out.print(request.getContextPath());
      out.write("/mypage/mypageWishlist?memberId=");
      out.print(memberId);
      out.write("\";\n");
      out.write("\t\t\t\t\t}\n");
      out.write("\t\t\t\t\telse{\n");
      out.write("\t\t\t\t\t\talert(\"위시리스트에 상품담기를 실패하였습니다!\");\n");
      out.write("\t\t\t\t\t}\n");
      out.write("\t\t\t\t},\n");
      out.write("\t\t\t\terror: (jqxhr, textStatus, errorThrown)=>{\n");
      out.write("\t\t\t\t\tconsole.log(jqxhr, textStatus, errorThrown);\n");
      out.write("\t\t\t\t} \n");
      out.write("\t\t\t});\n");
      out.write("\t\t}\n");
      out.write("\t});\n");
      out.write("\t\n");
      out.write("\t//장바구니 버튼 눌렀을 경우: 회원아이디, 상품번호, 렌탈유형, 수량 넘기기\n");
      out.write("\t$(\"#btn-addCart\").on('click', function(){\n");
      out.write("\t\tif(");
      out.print(memberLoggedIn==null);
      out.write("){\n");
      out.write("\t\t\tgoLogin();\n");
      out.write("\t\t}\n");
      out.write("\t\telse{\n");
      out.write("\t\t\tlet rentTypeVal = $(\"#rent-type option:selected\").val(); //렌탈유형\n");
      out.write("\t\t\tlet orderNoVal = $(\"#orderNo\").val(); //수량\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t$.ajax({\n");
      out.write("\t\t\t\turl: \"");
      out.print(request.getContextPath());
      out.write("/member/memberCartInsert\",\n");
      out.write("\t\t\t\ttype: \"post\",\n");
      out.write("\t\t\t\tdata: {\n");
      out.write("\t\t\t\t\tmemberId: \"");
      out.print(memberId);
      out.write("\",\n");
      out.write("\t\t\t\t\titemNo: ");
      out.print(item.getItemNo());
      out.write(",\n");
      out.write("\t\t\t\t\trentType: rentTypeVal,\n");
      out.write("\t\t\t\t\titemQuantity: orderNoVal\n");
      out.write("\t\t\t\t},\n");
      out.write("\t\t\t\tdataType: \"json\",\n");
      out.write("\t\t\t\tsuccess: data => {\n");
      out.write("\t\t\t\t\tconsole.log(data);\n");
      out.write("\t\t\t\t\t\n");
      out.write("\t\t\t\t\tif(data.result===1){\n");
      out.write("\t\t\t\t\t\tif(!confirm(\"장바구니에 상품이 담겼습니다.\\n지금 장바구니를 확인하시겠습니까?\")) return;\n");
      out.write("\t\t\t\t\t\tlocation.href = \"");
      out.print(request.getContextPath());
      out.write("/member/memberCart?memberId=");
      out.print(memberId);
      out.write("\";\n");
      out.write("\t\t\t\t\t}\n");
      out.write("\t\t\t\t\telse if(data.count===1){\n");
      out.write("\t\t\t\t\t\tif(!confirm(\"이미 장바구니에 존재하는 상품입니다!\\n지금 장바구니를 확인하시겠습니까?\")) return;\n");
      out.write("\t\t\t\t\t\tlocation.href = \"");
      out.print(request.getContextPath());
      out.write("/member/memberCart?memberId=");
      out.print(memberId);
      out.write("\";\n");
      out.write("\t\t\t\t\t}\n");
      out.write("\t\t\t\t\telse if(data.stock===0){\n");
      out.write("\t\t\t\t\t\talert(\"이 상품은 현재 품절되었습니다!\");\n");
      out.write("\t\t\t\t\t}\n");
      out.write("\t\t\t\t\t//장바구니에 이미 담겨있는 현재 상품의 수량과 재고를 비교해서 할 것! \n");
      out.write("\t\t\t\t\t/* else if(data.stock>0){\n");
      out.write("\t\t\t\t\t\talert(\"선택가능한 상품 수보다 더 많이 선택하셨습니다!\\n현재 선택가능한 상품 수는 [\"+data.stock+\"]입니다.\");\n");
      out.write("\t\t\t\t\t\torderNoVal = data.stock;\n");
      out.write("\t\t\t\t\t} */\n");
      out.write("\t\t\t\t\telse{\n");
      out.write("\t\t\t\t\t\talert(\"장바구니에 상품담기를 실패하였습니다!\");\n");
      out.write("\t\t\t\t\t}\n");
      out.write("\t\t\t\t},\n");
      out.write("\t\t\t\terror: (jqxhr, textStatus, errorThrown)=>{\n");
      out.write("\t\t\t\t\tconsole.log(jqxhr, textStatus, errorThrown);\n");
      out.write("\t\t\t\t} \n");
      out.write("\t\t\t});\n");
      out.write("\t\t}\n");
      out.write("\t});\n");
      out.write("\t\n");
      out.write("\t//바로렌탈 버튼 눌렀을 경우: 회원아이디, 상품번호, 렌탈유형, 수량 넘기기\n");
      out.write("\t$(\"#btn-goRent\").on('click', function(){\n");
      out.write("\t\tlet rentTypeVal = $(\"#rent-type option:selected\").val();\n");
      out.write("\t\tlet orderNo = document.querySelector(\"#orderNo\").value;\n");
      out.write("\n");
      out.write("\t\tif(");
      out.print(memberLoggedIn==null);
      out.write("){\n");
      out.write("\t\t\tgoLogin();\n");
      out.write("\t\t}\n");
      out.write("\t\telse {\n");
      out.write("\t\t\tlocation.href = \"");
      out.print(request.getContextPath());
      out.write("/order/orderOne?memberId=");
      out.print(memberId);
      out.write("&categoryNo=");
      out.print(categoryNo);
      out.write("&itemNo=");
      out.print(item.getItemNo());
      out.write("&rentType=\"+rentTypeVal+\"&ea=\"+orderNo;\n");
      out.write("\t\t}\n");
      out.write("\t\t\n");
      out.write("\t}); \n");
      out.write("\t\n");
      out.write("});\n");
      out.write("function goLogin(){\n");
      out.write("\tif(!confirm(\"로그인이 필요한 서비스입니다.\\n로그인 페이지로 이동하시겠습니까?\")) return;\n");
      out.write("\tlocation.href = \"");
      out.print(request.getContextPath());
      out.write("/member/memberLogin\";\n");
      out.write("}\n");
      out.write("function changeOrderNo(num){\n");
      out.write("\tlet stockStr = ");
      out.print(item.getItemStock());
      out.write("; //상품 재고\n");
      out.write("\tlet inputOrderNo = document.querySelector(\"#orderNo\");\n");
      out.write("\tlet oldNo = inputOrderNo.value;\n");
      out.write("\tlet newNo = (inputOrderNo.value*1)+num; //수량(정수형)\n");
      out.write("\t\n");
      out.write("\tif(newNo < 1) {\n");
      out.write("\t\tnewNo = 1;\n");
      out.write("\t\talert(\"수량은 반드시 1개 이상 선택되어야 합니다.\");\n");
      out.write("\t}\n");
      out.write("\tif(newNo > stockStr) {\n");
      out.write("\t\tnewNo = stockStr;\n");
      out.write("\t\talert(\"수량은 상품재고보다 더 많이 선택될 수 없습니다.\\n현재 상품의 수량은 [\"+stockStr+\"]입니다.\");\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\tinputOrderNo.value = newNo;\n");
      out.write("\t\n");
      out.write("\t//수량 변경되면 가격 변경\n");
      out.write("\tlet totalPrice = document.querySelector(\"#total-price\");\n");
      out.write("\tlet curVal = totalPrice.innerText; //현재 선택된 렌탈유형 가격(수량1기준)\n");
      out.write("\tlet delIdx = curVal.indexOf('원');\n");
      out.write("\tcurVal = curVal.substr(0, delIdx).replace(',','');\n");
      out.write("\tcurVal *= 1; //정수형변환\n");
      out.write("\tlet plusPrice = curVal; //더하고 뺄 가격 \n");
      out.write("\t\n");
      out.write("\tlet changeVal = 0; //변경될 가격\n");
      out.write("\t\n");
      out.write("\t//버튼 누를 때 \n");
      out.write("\tconsole.log(\"plus\");\n");
      out.write("\tvar selectOption = document.getElementById(\"rent-type\") // 현재 렌탈옵션 element를 모두 가져옴\n");
      out.write("\tvar selectOptionInnerHTML = selectOption.options[selectOption.selectedIndex].innerHTML; // 현재 렌탈옵션 element에서 글자를 모두 가져옴\n");
      out.write("\tvar replaceSelectOptionInnerHTML = selectOptionInnerHTML.replace(',',''); // replace를 사용해 , 를 없앰\n");
      out.write("\tconsole.log(\"zz\"+replaceSelectOptionInnerHTML); // 없앤 , 체크\n");
      out.write("\tvar pattern = /(.*)원(.*)/; // 정규식 정의\n");
      out.write("\tpattern.test(replaceSelectOptionInnerHTML); // 정규식 실행\n");
      out.write("\tvar RegExp_1 = RegExp.$1; // 실행한 정규식의 첫번째 인자를 RegExp_1에 저장. 두번째 인자를 하려면 RegExp.$2로 하기. \n");
      out.write("\tconsole.log(\"짠:\"+RegExp_1); // 정규식의 첫번째 인자를 확인\n");
      out.write("\t\n");
      out.write("\tfor(let i=0; i<newNo; i++){\n");
      out.write("\t\tconsole.log(\"1changeVal:\"+changeVal); // 계산된 가격을 log로 찍기\n");
      out.write("\t\tchangeVal += (RegExp_1*1); // 수량 만큼 가격을 더하기\n");
      out.write("\t\t//console.log(\"changeValAfterPlus=\"+changeVal);\n");
      out.write("\t\ttotalPrice.innerText = changeVal.toLocaleString()+\"원\";\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t//console.log(\"changeValAfterPlus=\"+changeVal);\n");
      out.write("\ttotalPrice.innerText = changeVal.toLocaleString()+\"원\"; // 마지막에 \"원\" 글자를 붙이기\n");
      out.write("\t\n");
      out.write("\t//totalPrice.innerText = changeVal.toLocaleString()+\"원\";\n");
      out.write("}\n");
      out.write("</script>\n");
      out.write("<!-- page nav -->\n");
      out.write("<nav class=\"line-style page-nav\">\n");
      out.write("    <ul class=\"list-unstyled list-inline\">\n");
      out.write("        <li class=\"go-home\">\n");
      out.write("            <a href=\"");
      out.print(request.getContextPath());
      out.write("/index.jsp\">메인</a>\n");
      out.write("            <span class=\"glyphicon glyphicon-menu-right\" aria-hidden=\"true\"></span>\n");
      out.write("        </li>\n");
      out.write("        <li class=\"go-boxmenu\">\n");
      out.write("            <a href=\"");
      out.print(request.getContextPath());
      out.write("/common/boxMenu?level1=when\">이럴 때 빌려봐</a>\n");
      out.write("            <span class=\"glyphicon glyphicon-menu-right\" aria-hidden=\"true\"></span>\n");
      out.write("        </li>\n");
      out.write("        ");
 
        	if("CT01".equals(categoryNo)){
        
      out.write("\n");
      out.write("        \t<li><a href=\"");
      out.print(request.getContextPath());
      out.write("/item/itemList?categoryNo=");
      out.print(categoryNo);
      out.write("\">반려동물과 함께 할 때</a><span class=\"glyphicon glyphicon-menu-right\" aria-hidden=\"true\"></span></li>\n");
      out.write("        ");

        	}
        	if("CT02".equals(categoryNo)){
        
      out.write("\n");
      out.write("        \t<li><a href=\"");
      out.print(request.getContextPath());
      out.write("/item/itemList?categoryNo=");
      out.print(categoryNo);
      out.write("\">육아할 때</a><span class=\"glyphicon glyphicon-menu-right\" aria-hidden=\"true\"></span></li>\n");
      out.write("        ");

        	}
        	if("CT03".equals(categoryNo)){
        
      out.write("\n");
      out.write("        \t<li><a href=\"");
      out.print(request.getContextPath());
      out.write("/item/itemList?categoryNo=");
      out.print(categoryNo);
      out.write("\">파티할 때</a><span class=\"glyphicon glyphicon-menu-right\" aria-hidden=\"true\"></span></li>\n");
      out.write("        ");

        	}
        	if("CT04".equals(categoryNo)){
        
      out.write("\n");
      out.write("        \t<li><a href=\"");
      out.print(request.getContextPath());
      out.write("/item/itemList?categoryNo=");
      out.print(categoryNo);
      out.write("\">운동할 때</a><span class=\"glyphicon glyphicon-menu-right\" aria-hidden=\"true\"></span></li>\n");
      out.write("        ");

        	}
        	if("CT05".equals(categoryNo)){
        
      out.write("\n");
      out.write("        \t<li><a href=\"");
      out.print(request.getContextPath());
      out.write("/item/itemList?categoryNo=");
      out.print(categoryNo);
      out.write("\">여행갈 때</a><span class=\"glyphicon glyphicon-menu-right\" aria-hidden=\"true\"></span></li>\n");
      out.write("        ");

        	}
        	if("CT06".equals(categoryNo)){
        
      out.write("\n");
      out.write("        \t<li><a href=\"");
      out.print(request.getContextPath());
      out.write("/item/itemList?categoryNo=");
      out.print(categoryNo);
      out.write("\">캠핑갈 때</a><span class=\"glyphicon glyphicon-menu-right\" aria-hidden=\"true\"></span></li>\n");
      out.write("        ");

        	}
        
      out.write("\n");
      out.write("        <li>");
      out.print(item.getItemName());
      out.write("</li>\n");
      out.write("    </ul>\n");
      out.write("</nav>\n");
      out.write("\n");
      out.write("<div id=\"view-details\" class=\"container-fluid contents none-nav\">\n");
      out.write("\t<!-- 상단: 이미지/옵션 영역 -->\n");
      out.write("\t<div id=\"view-wrapper\" class=\"row\">\n");
      out.write("\t    <section id=\"view-img\" class=\"col-md-6\">\n");
      out.write("\t        <h2 class=\"sr-only\">상품 이미지 보기</h2>\n");
      out.write("\t        <img src=\"");
      out.print(request.getContextPath());
      out.write("/images/");
      out.print(categoryNo);
      out.write('/');
      out.print(imgList.get(0).getItemImageRenamed() );
      out.write("\" alt=\"상품 대표이미지\">\n");
      out.write("\t        ");

	        	//이미지가 2개 이상이라면(서브이미지가 있다면)
				if(imgList.size()>2){
					for(int i=1; i<imgList.size()-1; i++){
	        
      out.write("\n");
      out.write("\t        \t\t\t<img src=\"");
      out.print(request.getContextPath());
      out.write("/images/");
      out.print(categoryNo);
      out.write('/');
      out.print(imgList.get(i).getItemImageRenamed() );
      out.write("\" alt=\"상품 서브이미지\">\n");
      out.write("\t        ");

					}
	        	}
	        
      out.write("\n");
      out.write("\t    </section>            \n");
      out.write("\t    <section id=\"opt-wrapper\" class=\"col-md-6\">\n");
      out.write("\t        <div id=\"opt-header\" class=\"row\">\n");
      out.write("\t            <div class=\"col-md-6\">\n");
      out.write("\t                <p id=\"total-price\" class=\"text-center\">");
      out.print(price14);
      out.write("</p>\n");
      out.write("\t            </div>\n");
      out.write("\t            <div class=\"col-md-6\">\n");
      out.write("\t                <button type=\"button\" id=\"btn-wishlist\" class=\"center-block\">\n");
      out.write("\t                   \t 위시리스트에 담기<span class=\"glyphicon glyphicon-heart-empty\" aria-hidden=\"true\"></span>\n");
      out.write("\t                </button>\n");
      out.write("\t            </div>\n");
      out.write("\t        </div>\n");
      out.write("\t        <section id=\"opt-inner\">\n");
      out.write("\t            <section>\n");
      out.write("\t                <p class=\"pbrand\">");
      out.print(item.getItemBrand());
      out.write("</p>\n");
      out.write("\t                <p id=\"pname\">");
      out.print(item.getItemName());
      out.write("</p>\n");
      out.write("\t            </section>\n");
      out.write("\t            <section id=\"sel-rentType\">\n");
      out.write("\t                <p>렌탈옵션</p>\n");
      out.write("\t                <label for=\"rent-type\" class='sr-only'>렌탈옵션</label>\n");
      out.write("\t                <select name=\"rentType\" id=\"rent-type\">\n");
      out.write("\t                    <option value=\"7\"><span class=\"rt-price\">");
      out.print(price7);
      out.write("</span><span class=\"period\">/일시납 7일</option>\n");
      out.write("\t                    <option value=\"14\" selected><span class=\"rt-price\">");
      out.print(price14);
      out.write("</span><span class=\"period\">/일시납 14일</option>\n");
      out.write("\t                    <option value=\"30\"><span class=\"rt-price\">");
      out.print(price30);
      out.write("</span><span class=\"period\">/일시납 30일</option>\n");
      out.write("\t                </select>\n");
      out.write("\t            </section>\n");
      out.write("\t            <section id=\"sel-amount\">\n");
      out.write("\t                <p>수량</p>\n");
      out.write("\t                <label for=\"\" class=\"sr-only\">구매수량</label>\n");
      out.write("\t                <button type=\"button\" class=\"btn-minus\" onclick=\"changeOrderNo(-1);\"><span class=\"glyphicon glyphicon-minus\" aria-hidden=\"true\"></span></button>\n");
      out.write("\t                <input type=\"text\" name=\"orderNo\" id=\"orderNo\" class=\"text-center\" value=\"1\" readonly>\n");
      out.write("\t                <button type=\"button\" class=\"btn-plus\" onclick=\"changeOrderNo(1);\"><span class=\"glyphicon glyphicon-plus\" aria-hidden=\"true\"></span></button>\n");
      out.write("\t            </section>\n");
      out.write("\t            <div id=\"opt-footer\" class=\"row\">\n");
      out.write("\t                <div class=\"col-md-6\">\n");
      out.write("\t                    <button type=\"button\" id=\"btn-addCart\" class=\"center-block\">장바구니</button>\n");
      out.write("\t                </div>\n");
      out.write("\t                <div class=\"col-md-6\">\n");
      out.write("\t                    <button type=\"button\" id=\"btn-goRent\" class=\"center-block color-reflex\">바로렌탈</button>\n");
      out.write("\t                </div>\n");
      out.write("\t            </div>\n");
      out.write("\t            <section id=\"opt-desc\">\n");
      out.write("\t            \t<p>제품 고시 정보</p>\n");
      out.write("\t            \t<ul class=\"list-unstyled\">\n");
      out.write("\t            \t");

	            		for(String str: descArray){	
	            	
      out.write("\n");
      out.write("\t            \t\t<li>");
      out.print(str);
      out.write("</li>\n");
      out.write("\t            \t");

	            		}
	            	
      out.write("\n");
      out.write("\t            \t</ul>\n");
      out.write("\t            </section>\n");
      out.write("\t        </section>\n");
      out.write("\t    </section>\n");
      out.write("\t</div>\n");
      out.write("\t<!-- 하단: 상품상세/리뷰/qna 영역 -->\n");
      out.write("\t<div id=\"details-wrapper\">\n");
      out.write("\t    <section class=\"details-tab\">\n");
      out.write("\t        <ul class=\"list-unstyled list-inline row\">\n");
      out.write("\t            <li class=\"col-md-3 active\"><button type=\"button\" onclick=\"showContent(this, 'details-img')\">상품상세</button></li>\n");
      out.write("\t            <li class=\"col-md-3\"><button type=\"button\" onclick=\"showContent(this, 'details-infoShip');\">배송/반품</button></li>\n");
      out.write("\t            <li class=\"col-md-3\"><button type=\"button\" onclick=\"showContent(this, 'details-review');\">이용후기(<span class=\"board-cnt\">");
      out.print(reviewTotalContent );
      out.write("</span>)</button></li>\n");
      out.write("\t            <li class=\"col-md-3\"><button type=\"button\" onclick=\"showContent(this, 'details-qna');\">상품Q&A(<span class=\"board-cnt\">");
      out.print(qnaTotalContent );
      out.write("</span>)</button></li>\n");
      out.write("\t        </ul>\n");
      out.write("\t    </section>\n");
      out.write("\t    <div class=\"details-contents row\">\n");
      out.write("\t        <div class=\"col-md-1\"></div>\n");
      out.write("\t        <div class=\"col-md-10 dc-inner\">\n");
      out.write("\t            <!-- 상품상세 -->\n");
      out.write("\t            <section id=\"details-img\" class=\"active\">\n");
      out.write("\t                <h3 class=\"sr-only\">상품상세이미지</h3>\n");
      out.write("\t                <img src=\"");
      out.print(request.getContextPath());
      out.write("/images/");
      out.print(categoryNo);
      out.write('/');
      out.print(imgList.get(imgList.size()-1).getItemImageRenamed());
      out.write("\" alt=\"상품정보이미지\">\n");
      out.write("\t            </section>\n");
      out.write("\t            <!-- 배송반품 -->\n");
      out.write("                <section id=\"details-infoShip\" class=\"center-block\">\n");
      out.write("                    <div class=\"info-ship\">\n");
      out.write("                        <h3 class=\"sr-only\">배송안내</h3>\n");
      out.write("                        <img src=\"");
      out.print(request.getContextPath());
      out.write("/images/info_ship.JPG\" alt=\"배송안내 사진\">\n");
      out.write("                        <ul class=\"list-unstyled\">\n");
      out.write("                            <li>-주문한 상품은 배송준비 단계 이후에는 주문취소가 불가 합니다.(이후부터는 반품/교환 신청만 가능합니다.)</li>\n");
      out.write("                            <li>-렌탈 상품의 경우 창고 출고 과정을 동영상 서비스로 제공하고 있습니다.</li>\n");
      out.write("                        </ul>\n");
      out.write("                        <p class=\"strong\">배송지역</p>\n");
      out.write("                        <p>-전국 배송 (단, 일부 상품의 경우 도서/산간지역의 배송이 제한되거나 특정 지역만 배송이 가능합니다.)</p>\n");
      out.write("                    </div>\n");
      out.write("                    <div class=\"info-back\">\n");
      out.write("                        <h3 class=\"sr-only\">회수안내</h3>\n");
      out.write("                        <img src=\"");
      out.print(request.getContextPath());
      out.write("/images/info_back.JPG\" alt=\"회수안내 사진\">\n");
      out.write("                        <ul class=\"list-unstyled\">\n");
      out.write("                            <li>-보증금은 계약 종료 후 반환 됩니다. 상품의 훼손/구성품 분실 시 정비비가 발생될 수 있으며, 보증금에서 차감후 지급됩니다.</li>\n");
      out.write("                            <li>-회수된 상품의 검수 과정을 마이페이지에서 동영상으로 확인할 수 있습니다.</li>\n");
      out.write("                        </ul>\n");
      out.write("                        <p class=\"strong\">공통사항</p>\n");
      out.write("                        <ul class=\"list-unstyled\">\n");
      out.write("                            <li>-렌탈계약 종료일 5일전에 회수 안내 알림톡/SMS가 발송되며, 회수 당일 날 담당 택배기사(롯데택배로 배송된 상품에 한함)가 연락 후상품을 회수합니다.</li>\n");
      out.write("                            <li>-구성품 리스트를 참고하여 상품의 구성품을 확인하시고 받으신 상품 박스에 스티로폼, 비닐 등 배송 시 동봉되었던 충전재와 함께 넣어주시기 바랍니다.</li>\n");
      out.write("                            <li>-인수형장기 설치 상품은 별도의 회수가 없습니다.</li>\n");
      out.write("                            <li>-픽업상품은 상품을 수령한 매장으로 직접 반품(반송)하셔야 합니다. (택배송 불가)</li>\n");
      out.write("                        </ul>\n");
      out.write("                    </div>\n");
      out.write("                    <div class=\"info-return\">\n");
      out.write("                        <h3 class=\"sr-only\">교환/반품안내</h3>\n");
      out.write("                        <img src=\"");
      out.print(request.getContextPath());
      out.write("/images/info_return.JPG\" alt=\"교환반품안내 사진\">\n");
      out.write("                        <p class=\"strong\">교환/ 반품 안내</p>\n");
      out.write("                        <ul class=\"list-unstyled\">\n");
      out.write("                            <li>-교환/반품 신청은 \"마이페이지-계약중인 렌탈-계약 상세 정보\"에서 계약건 별로 신청 가능 합니다.</li>\n");
      out.write("                            <li>-교환 접수가 완료되면 대체상품을 배송해드리면서 기존 상품을 회수합니다.</li>\n");
      out.write("                            <li>-반품 시 환불처리는 창고 입고/검수 완료 후에 진행됩니다. (제품 훼손, 구성품 분실시 별도 정비비가 발생할 수 있습니다.)</li>\n");
      out.write("                            <li>-회수된 상품의 검수 과정을 마이페이지에서 동영상으로 확인할 수 있습니다.</li>\n");
      out.write("                        </ul>\n");
      out.write("                        <p class=\"strong\">공통사항</p>\n");
      out.write("                        <ul class=\"list-unstyled\">\n");
      out.write("                            <li>-지정 택배회사가 아닌 타 택배회사를 통해 고객님께서 직접 발송하는 경우 택배비는 본인 부담입니다.</li>\n");
      out.write("                            <li>-단순변심으로 인한 반품시, 반품(편도) 배송비가 부과됩니다.</li>\n");
      out.write("                            <li>-무료배송 상품의 경우에도 반품시에는 배송비가 적용됩니다.</li>\n");
      out.write("                        </ul>\n");
      out.write("                    </div>\n");
      out.write("                </section>\n");
      out.write("\t            <!-- 이용후기 -->\n");
      out.write("\t            <section id=\"details-review\">\n");
      out.write("\t           \t\t");

	                  if(blist!=null && !blist.isEmpty()){
	                
      out.write("\n");
      out.write("\t                <section id=\"writed-review\" class=\"list-wrapper\">\n");
      out.write("\t                    <h3 class=\"sr-only\">이용후기 리스트</h3>\n");
      out.write("\t                    <ul class=\"list-unstyled wishlist-inner\">\n");
      out.write("\t\t\t\t           ");
 
				               int c=0;
				              
				               for(Board b : blist){ 
				            	   c++;
				            	   if(b.getItem_no()==item.getItemNo()){
			               
      out.write("\n");
      out.write("\t                        <li>\n");
      out.write("\t                            <section class=\"dtReview-header row\">\n");
      out.write("\t                                <div class=\"star col-md-2\">\n");
      out.write("\t\t\t\t\t\t\t\t\t\t");
 for(int i=0; i<b.getReview_star(); i++){ 
      out.write("\n");
      out.write("\t\t                                <span class=\"glyphicon glyphicon-star\" aria-hidden=\"true\"></span>\n");
      out.write("\t\t    \t\t\t\t\t\t\t");
} 
      out.write("\t                                \n");
      out.write("\t\t    \t\t\t\t\t\t</div>\n");
      out.write("\t\t    \t\t\t\t\t\t<div class=\"review-content col-md-7\">\n");
      out.write("\t                                    <p>");
      out.print(b.getReview_content() );
      out.write("</p>\n");
      out.write("\t                                </div>\n");
      out.write("\t                                <div class=\"review-info col-md-2\">\n");
      out.write("\t                                    <span class=\"review-writer\">");
      out.print(b.getReview_writer() );
      out.write("</span>\n");
      out.write("\t                                    <span class=\"review-slash\"> | </span>\n");
      out.write("\t                                    <span class=\"review-date\">");
      out.print(b.getReview_date() );
      out.write("</span>\n");
      out.write("\t                                </div>\n");
      out.write("\t                            </section>\n");
      out.write("\t                        </li>\n");
      out.write("\t                   \t ");
 } 
      out.write("\n");
      out.write("\t                    ");
 } 
      out.write("\n");
      out.write("\t                    </ul>\n");
      out.write("\t                </section>\n");
      out.write("\t                <!-- 페이징바 -->\n");
      out.write("\t                <nav class=\"paging-bar text-center\">\n");
      out.write("\t                    <ol class=\"list-unstyled list-inline\">\n");
      out.write("\t\t\t\t\t\t\t");
      out.print(reviewPageBar );
      out.write("\n");
      out.write("\t                    </ol>\n");
      out.write("\t                </nav>\n");
      out.write("\t                ");

			        	} //end of if(글이 존재할 때)
			        	//등록된 글 없을때
			        	else{
			        
      out.write("\n");
      out.write("\t\t\t        \t<div id=\"warning-wrapper\" class=\"content-wrapper text-center\">\n");
      out.write("\t\t\t\t\t\t\t<p><span class=\"glyphicon glyphicon-remove-circle\" aria-hidden=\"true\"></span>등록된 이용후기가 없습니다.</p> \n");
      out.write("\t\t\t\t\t\t</div>\n");
      out.write("\t\t\t        ");
 } 
      out.write("\n");
      out.write("\t            </section>\n");
      out.write("\t            <!-- 상품QNA -->\n");
      out.write("\t            <section id=\"details-qna\">\n");
      out.write("\t                <div class=\"btn-wrapper\">\n");
      out.write("\t\t                <!--관리자로 로그인시 문의하기 버튼 안 뜨게 설정-->\n");
      out.write("\t\t                ");
if(memberLoggedIn!=null && "admin".equals(memberLoggedIn.getMemberId())){ 
      out.write("\n");
      out.write("\t\t                ");
} 
		                else{
		                
      out.write("\n");
      out.write("\t\t                    <button type=\"button\" id=\"btn-goQna\" class=\"btn-radius pull-right\">문의하기</button>\n");
      out.write("\t\t                ");
} 
      out.write("\n");
      out.write("\t                </div>\n");
      out.write("\t                <section id=\"point-list\" class=\"list-wrapper\">\n");
      out.write("\t                    <h3 class=\"sr-only\">문의내역 리스트</h3>\n");
      out.write("\t                    ");

	                       if(qList!=null && !qList.isEmpty()){
	                     
      out.write("\n");
      out.write("\t                    <table class=\"text-center list-tbl\">\n");
      out.write("\t                        <thead>\n");
      out.write("\t                            <tr class=\"row\">\n");
      out.write("\t                                <th class=\"col-md-6 text-center\">문의내용</th>\n");
      out.write("\t                                <th class=\"col-md-2 text-center\">답변상태</th>\n");
      out.write("\t                                <th class=\"col-md-2 text-center\">작성자</th>\n");
      out.write("\t                                <th class=\"col-md-2 text-center\">작성일</th>\n");
      out.write("\t                            </tr>\n");
      out.write("\t                        </thead>\n");
      out.write("\t                        <tbody>\n");
      out.write("\t                        ");

	                        		for(ItemQna q: qList){
	                        
      out.write("\n");
      out.write("\t                            <tr class=\"row qna-header\">\n");
      out.write("\t                                <td class=\"col-md-6 qna-title\">\n");
      out.write("\t                                    <button type=\"button\" class=\"center-block\">");
      out.print(q.getItemQnaContent() );
      out.write("</button>\n");
      out.write("\t                                </td>\n");
      out.write("\t                                ");

	                                	if("Y".equals(q.getItemQnaAnsYn())){
	                                
      out.write("\n");
      out.write("\t                                \t\t<td class=\"col-md-2\">답변완료</td>\n");
      out.write("\t                                ");

	                                	}
	                                	else{
	                                
      out.write("\n");
      out.write("\t                                \t\t<td class=\"col-md-2\">답변대기</td>\n");
      out.write("\t                                ");

	                                	}
	                                
      out.write("\n");
      out.write("\t                                <td class=\"col-md-2\">");
      out.print(q.getMemberId() );
      out.write("</td>\n");
      out.write("\t                                <td class=\"col-md-2\">");
      out.print(q.getItemQnaDate() );
      out.write("</td>\n");
      out.write("\t                            </tr>\n");
      out.write("\t                            <tr class=\"row qna-view\">\n");
      out.write("\t                                <td colspan=\"4\" class=\"col-md-12\">\n");
      out.write("\t                                    <div class=\"q-wrapper\">\n");
      out.write("\t                                        <span class=\"q-title strong\">Q.</span>\n");
      out.write("\t                                        <p class=\"center-block\">");
      out.print(q.getItemQnaContent() );
      out.write("</p>\n");
      out.write("\t                                    </div>\n");
      out.write("\t                                    <div class=\"q-wrapper\">\n");
      out.write("\t                                        <span class=\"q-title strong\">A.</span>\n");
      out.write("\t                                        ");

			                                	if("Y".equals(q.getItemQnaAnsYn())){
			                                
      out.write("\n");
      out.write("\t\t\t                                \t\t<p class=\"center-block\">");
      out.print(qnaMap.get(q.getItemQnaNo()).getItemQnaAnsContent() );
      out.write("</p>\n");
      out.write("\t\t\t                                ");

			                                	}
	                                        
	                                        	/*관리자일 경우 답변대기중일때 답변등록창 뜨게 설정*/
			                                	else if(memberLoggedIn!=null && "admin".equals(memberLoggedIn.getMemberId())){
			                                
      out.write("\n");
      out.write("\t\t\t                         \n");
      out.write("\t\t\t                                \t<form action=\"");
      out.print(request.getContextPath());
      out.write("/admin/item/qnaAnsInsert?categoryNo=");
      out.print(categoryNo);
      out.write("&itemNo=");
      out.print(item.getItemNo());
      out.write("\" \n");
      out.write("\t\t\t                                \t\tmethod=\"post\" name=\"itemQnaCommentFrm\">\n");
      out.write("\t\t\t                                \t\t<input type=\"hidden\" name=\"itemQnaNo\" value=\"");
      out.print(q.getItemQnaNo());
      out.write("\" />\n");
      out.write("\t\t\t                                \t\t<input type=\"text\" name=\"itemQnaAnsContent\" placeholder=\"상품 QnA 답변\" size=\"80px;\"/>\n");
      out.write("\t\t\t                                \t\t<button type=\"submit\" id=\"btn-ansQna\" class=\"btn-radius\">등록</button>\n");
      out.write("\t\t\t                                \t</form>\t\n");
      out.write("\t\t\t\t                                \t\t\n");
      out.write("\t\t\t                                \t\t\n");
      out.write("\t\t\t                                ");
 	
			                                	}
	                                        	/*관리자가 아닐시 답변대기중 메세지만 뜨게 설정 */
			                                	else{
			                                
      out.write("\n");
      out.write("\t\t\t                                \t\t<p class=\"center-block\">답변대기 중입니다.</p>\n");
      out.write("\t\t\t                                ");
  
			                                	}
	                                        
      out.write("\t\n");
      out.write("\t\t\t                                \t\n");
      out.write("\t                                    </div>\n");
      out.write("\t                                </td>\n");
      out.write("\t                            </tr>\n");
      out.write("\t                        ");

		                        	}
	                        
      out.write("\n");
      out.write("\t                        </tbody>\n");
      out.write("\t                    </table>\n");
      out.write("\t                </section> \n");
      out.write("\t                <!-- 페이징바 -->\n");
      out.write("\t                <nav class=\"paging-bar text-center\">\n");
      out.write("\t                    <ol class=\"list-unstyled list-inline\">\n");
      out.write("\t                        ");
      out.print(qnaPageBar );
      out.write("\n");
      out.write("\t                    </ol>\n");
      out.write("\t                </nav>\n");
      out.write("\t            </section>\n");
      out.write("\t        ");

	        	} //end of if(글이 존재할 때)
	        	//등록된 글이 없을때
	        	else{
	        
      out.write("\n");
      out.write("\t        \t<div id=\"warning-wrapper\" class=\"content-wrapper table-warning text-center\">\n");
      out.write("\t\t\t\t\t<p><span class=\"glyphicon glyphicon-remove-circle\" aria-hidden=\"true\"></span>등록된 상품Q&A가 없습니다.</p> \n");
      out.write("\t\t\t\t</div>\n");
      out.write("\t        ");
 } 
      out.write("\n");
      out.write("\t        </div>\n");
      out.write("\t        <div class=\"col-md-1\"></div>\n");
      out.write("\t    </div>\n");
      out.write("\t</div>\n");
      out.write("</div>\n");
      out.write("\n");
      out.write("\n");
      out.write("<!-- 맨위로 이동 버튼 -->\n");
      out.write("<div id=\"go-to-top\" class=\"btn-bottom\">\n");
      out.write("    <button type=\"button\" id=\"btn-gotop\" class=\"center-block\" onclick=\"window.scrollTo(0,0);\">맨 위로 이동</button>\n");
      out.write("</div>\n");
      out.write("\n");
      out.write("\n");
      out.write("\t<footer class=\"container-fluid\">\n");
      out.write("\t    <div class=\"line-style\"></div>\n");
      out.write("\t    <!-- first line -->\n");
      out.write("\t    <div id=\"footer-menu\" class=\"row\">\n");
      out.write("\t        <div class=\"col-md-3\">\n");
      out.write("\t            <header>회사소개</header>\n");
      out.write("\t            <ul class=\"list-unstyled\">\n");
      out.write("\t                <li><a href=\"#\">이용약관</a></li>\n");
      out.write("\t                <li><a href=\"#\">정책안내</a></li>\n");
      out.write("\t            </ul>\n");
      out.write("\t        </div>\n");
      out.write("\t        <div class=\"col-md-3\">\n");
      out.write("\t            <header>고객서비스</header>\n");
      out.write("\t            <ul class=\"list-unstyled\">\n");
      out.write("\t                <li><a href=\"#\">FAQ</a></li>\n");
      out.write("\t                <li><a href=\"#\">1:1문의</a></li>\n");
      out.write("\t                <li><a href=\"#\">주문현황</a></li>\n");
      out.write("\t            </ul>\n");
      out.write("\t        </div>\n");
      out.write("\t        <div class=\"col-md-3\">\n");
      out.write("\t            <header>문의하기</header>\n");
      out.write("\t            <p id=\"q-call\" class=\"lead\">1577-1577</p>\n");
      out.write("\t            <p id=\"q-email\" class=\"lead\">reflex@naver.com</p>\n");
      out.write("\t            <p>평일 10:00~18:00</p>\n");
      out.write("\t            <p>주말 및 공휴일 휴무</p>\n");
      out.write("\t        </div>\n");
      out.write("\t        <div class=\"col-md-3\">\n");
      out.write("\t            <header>SNS</header>\n");
      out.write("\t            <ul class=\"list-unstyled\">\n");
      out.write("\t                <li><a href=\"#\">Facebook</a></li>\n");
      out.write("\t                <li><a href=\"#\">Instagram</a></li>\n");
      out.write("\t                <li><a href=\"#\">Twitter</a></li>\n");
      out.write("\t            </ul>\n");
      out.write("\t        </div>\n");
      out.write("\t    </div>\n");
      out.write("\t    <!-- second line -->\n");
      out.write("\t    <div id=\"about\" class=\"row\">\n");
      out.write("\t        <p class=\"eng\">re:flex</p>\n");
      out.write("\t        <p>대표:유찬호<span class=\"bar\"></span>사업자등록번호:419-87-00807<span class=\"bar\"></span>통신판매업신고:제 2017-서울마포-2273호</p>\n");
      out.write("\t        <p>주소: 서울특별시 마포구 동교동 203-43 4층<span class=\"bar\"></span>대표전화:1566-6813<span class=\"bar\"></span>FAX:070-7848-0818<span class=\"bar\"></span>이메일:reflex@naver.com</p>\n");
      out.write("\t        <p>개인정보관리책임자:유찬호</p>\n");
      out.write("\t    </div>\n");
      out.write("\t    <div id=\"copyright\" class=\"line-style\"><span>ⓒ</span>2019 re:flex</div>\n");
      out.write("\t</footer>\n");
      out.write("</body>\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
